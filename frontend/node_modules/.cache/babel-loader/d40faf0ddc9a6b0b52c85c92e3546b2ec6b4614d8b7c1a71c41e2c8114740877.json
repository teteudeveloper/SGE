{"ast":null,"code":"import React,{createContext,useState,useContext,useEffect}from'react';import authService from'../services/authService';import{jsx as _jsx}from\"react/jsx-runtime\";const AuthContext=/*#__PURE__*/createContext();export const AuthProvider=_ref=>{let{children}=_ref;const[user,setUser]=useState(null);const[loading,setLoading]=useState(true);useEffect(()=>{const currentUser=authService.getCurrentUser();setUser(currentUser);setLoading(false);},[]);const login=async(email,senha)=>{const userData=await authService.login(email,senha);setUser(userData);return userData;};const logout=()=>{authService.logout();setUser(null);};const value={user,login,logout,isAuthenticated:()=>authService.isAuthenticated(),hasRole:role=>authService.hasRole(role),hasAnyRole:roles=>authService.hasAnyRole(roles)};if(loading){return/*#__PURE__*/_jsx(\"div\",{children:\"Carregando...\"});}return/*#__PURE__*/_jsx(AuthContext.Provider,{value:value,children:children});};export const useAuth=()=>{const context=useContext(AuthContext);if(!context){throw new Error('useAuth deve ser usado dentro de AuthProvider');}return context;};","map":{"version":3,"names":["React","createContext","useState","useContext","useEffect","authService","jsx","_jsx","AuthContext","AuthProvider","_ref","children","user","setUser","loading","setLoading","currentUser","getCurrentUser","login","email","senha","userData","logout","value","isAuthenticated","hasRole","role","hasAnyRole","roles","Provider","useAuth","context","Error"],"sources":["/home/teteu/Downloads/trabalho/sge/frontend/src/context/AuthContext.jsx"],"sourcesContent":["import React, { createContext, useState, useContext, useEffect } from 'react';\nimport authService from '../services/authService';\n\nconst AuthContext = createContext();\n\nexport const AuthProvider = ({ children }) => {\n  const [user, setUser] = useState(null);\n  const [loading, setLoading] = useState(true);\n\n  useEffect(() => {\n    const currentUser = authService.getCurrentUser();\n    setUser(currentUser);\n    setLoading(false);\n  }, []);\n\n  const login = async (email, senha) => {\n    const userData = await authService.login(email, senha);\n    setUser(userData);\n    return userData;\n  };\n\n  const logout = () => {\n    authService.logout();\n    setUser(null);\n  };\n\n  const value = {\n  user,\n  login,\n  logout,\n  isAuthenticated: () => authService.isAuthenticated(),\n  hasRole: (role) => authService.hasRole(role),\n  hasAnyRole: (roles) => authService.hasAnyRole(roles),\n};\n\n  if (loading) {\n    return <div>Carregando...</div>;\n  }\n\n  return <AuthContext.Provider value={value}>{children}</AuthContext.Provider>;\n};\n\nexport const useAuth = () => {\n  const context = useContext(AuthContext);\n  if (!context) {\n    throw new Error('useAuth deve ser usado dentro de AuthProvider');\n  }\n  return context;\n};"],"mappings":"AAAA,MAAO,CAAAA,KAAK,EAAIC,aAAa,CAAEC,QAAQ,CAAEC,UAAU,CAAEC,SAAS,KAAQ,OAAO,CAC7E,MAAO,CAAAC,WAAW,KAAM,yBAAyB,CAAC,OAAAC,GAAA,IAAAC,IAAA,yBAElD,KAAM,CAAAC,WAAW,cAAGP,aAAa,CAAC,CAAC,CAEnC,MAAO,MAAM,CAAAQ,YAAY,CAAGC,IAAA,EAAkB,IAAjB,CAAEC,QAAS,CAAC,CAAAD,IAAA,CACvC,KAAM,CAACE,IAAI,CAAEC,OAAO,CAAC,CAAGX,QAAQ,CAAC,IAAI,CAAC,CACtC,KAAM,CAACY,OAAO,CAAEC,UAAU,CAAC,CAAGb,QAAQ,CAAC,IAAI,CAAC,CAE5CE,SAAS,CAAC,IAAM,CACd,KAAM,CAAAY,WAAW,CAAGX,WAAW,CAACY,cAAc,CAAC,CAAC,CAChDJ,OAAO,CAACG,WAAW,CAAC,CACpBD,UAAU,CAAC,KAAK,CAAC,CACnB,CAAC,CAAE,EAAE,CAAC,CAEN,KAAM,CAAAG,KAAK,CAAG,KAAAA,CAAOC,KAAK,CAAEC,KAAK,GAAK,CACpC,KAAM,CAAAC,QAAQ,CAAG,KAAM,CAAAhB,WAAW,CAACa,KAAK,CAACC,KAAK,CAAEC,KAAK,CAAC,CACtDP,OAAO,CAACQ,QAAQ,CAAC,CACjB,MAAO,CAAAA,QAAQ,CACjB,CAAC,CAED,KAAM,CAAAC,MAAM,CAAGA,CAAA,GAAM,CACnBjB,WAAW,CAACiB,MAAM,CAAC,CAAC,CACpBT,OAAO,CAAC,IAAI,CAAC,CACf,CAAC,CAED,KAAM,CAAAU,KAAK,CAAG,CACdX,IAAI,CACJM,KAAK,CACLI,MAAM,CACNE,eAAe,CAAEA,CAAA,GAAMnB,WAAW,CAACmB,eAAe,CAAC,CAAC,CACpDC,OAAO,CAAGC,IAAI,EAAKrB,WAAW,CAACoB,OAAO,CAACC,IAAI,CAAC,CAC5CC,UAAU,CAAGC,KAAK,EAAKvB,WAAW,CAACsB,UAAU,CAACC,KAAK,CACrD,CAAC,CAEC,GAAId,OAAO,CAAE,CACX,mBAAOP,IAAA,QAAAI,QAAA,CAAK,eAAa,CAAK,CAAC,CACjC,CAEA,mBAAOJ,IAAA,CAACC,WAAW,CAACqB,QAAQ,EAACN,KAAK,CAAEA,KAAM,CAAAZ,QAAA,CAAEA,QAAQ,CAAuB,CAAC,CAC9E,CAAC,CAED,MAAO,MAAM,CAAAmB,OAAO,CAAGA,CAAA,GAAM,CAC3B,KAAM,CAAAC,OAAO,CAAG5B,UAAU,CAACK,WAAW,CAAC,CACvC,GAAI,CAACuB,OAAO,CAAE,CACZ,KAAM,IAAI,CAAAC,KAAK,CAAC,+CAA+C,CAAC,CAClE,CACA,MAAO,CAAAD,OAAO,CAChB,CAAC","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}